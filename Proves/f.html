<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Buildings from tileset and html</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v3.5.1/mapbox-gl.css"
      rel="stylesheet"
    />
    <!--MAPBOX NEW STANDARD STYLES ONLY IF 3.5!!!-->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.5.1/mapbox-gl.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
    <body>
      <div id="map"></div>
    </body>
    <script>
        mapboxgl.accessToken =
          "pk.eyJ1IjoibWFwYXRvciIsImEiOiJja3dxaXdvZm8wbXI5Mm9xb2JraDJmMjY3In0.cluUTNNRHJwurzUx6dMZDQ";
        map = new mapboxgl.Map({
          container: "map",
          style: "mapbox://styles/mapbox/dark-v11",
          center: [2.16859, 41.3954],
          zoom: 15,
          attributionControl: false,
          pitch: 45,
          hash: true,
        });
  
        map.on("load", function () {
            
            map.addSource("edificios_source", {
                type: "vector",
                url: "mapator.2r8ox3lh", // mapbox: ID Tileset
            });
  
            map.addLayer({
                "id": "edificios",
                "type": "fill-extrusion",
                "source": "edificios_source",
                "source-layer": "construcciones-5xd1nq", // Nombre Tileset
                "maxzoom": 21,
                "minzoom": 15,
                "filter": [">", "numberOfFl", 0],
                "paint": {
                    "fill-extrusion-color": [
                        "interpolate", ["linear"], ["number", ["get", "numberOfFl"]], //si vinc de geojson canvio 'numberOfF1'
                        0, "#FFFFFF",
                        1, "#e6b03d",
                        3, "#e6b03d",
                        6, "#3de66d",
                        9, "#3de6b1",
                        12, "#22ecf0",
                        15, "#14b1fd",
                        20, "#3d73e6",
                        40, "#123a8f",
                        80, "#ce2f7e",
                        100, "transparent"
                    ],
                    "fill-extrusion-height": ["*", 2, ["to-number", ["get", "numberOfFl"]]], //to-number, el valor que passo com a altura no sé si és nombre o no. 
                    "fill-extrusion-opacity": 0.9
                }
            }
            ,"road-label"
            );
        });
      </script>
  </head>
</html>
